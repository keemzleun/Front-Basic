<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js basic</title>
    <script>
        function showObject(){
            let person = {name:"hong", age:"20", email:"hong@naver.com"};
            // 객체 접근 방법 1 : person.name
            console.log("이름은 " + person.name + "이고, email은 " + person.email);
            person.name = "kim"; // 객체 접근 후 변경

            // 객체 접근 방법 2 : person['name']
            console.log("이름은 " + person['name']);

            // Object.keys : 객체의 키를 배열로 반환
            const keyArr = Object.keys(person);
            for(let i=0; i<keyArr.length; i++){
                console.log(person[keyArr[i]]);
            }
            keyArr.forEach(e => {
                console.log(person[e]);
            });
        }
        function makeObject(){
            // 방법 1 )리터럴 방식으로 값 세팅

            // 방법 2 ) 동적으로 키와 값을 추가
            let myObject = {};
            myObject.name = 'hong';
            myObject.email = 'hong@naver.com';
            myObject['password'] = "1234";
            console.log(myObject);

            // 위 객체의 value만 console로 출력
            let keys = Object.keys(myObject);
            keys.forEach(e => {
                console.log(myObject[e]);
            });

            // name(key) : hong(value), email(lkey): hong@naver.com(value)
            // 백틱을 활용한 템플릿 리터럴
            let mySt = "";
            keys.forEach(e => {
                mySt += `${e}(key) : ${myObject[e]}(value) <br>`;
            })
            document.getElementById("result").innerHTML = mySt;


            const name = 'kim';
            const age = 30;
            const person1 = {name: name, age:age};
            // 단축 속성명 방식
            // 속성명(key)을 변수명과 동일하게 사용할 때 간편하게 객체 생성하는 방식
            const person2 = {name, age};

            const obj1 = {key1 : "value1"};
            const obj2 = {obj1:{key1 : "value1"}};
            console.log(obj2);

            // 스프레드 문법
            const obj3 = {a:1, b:2};
            const obj4 = {...obj3, c:3};    // 배열에서도 스프레드 문법 사용 가능
        }
        function makeArr(){
            let fruits = ['apple', 'banana', 'orange'];
            // grape 추가
            fruits.push("grape");
            console.log(fruits);

            // pop : 마지막 요소 제거
            fruits.pop();
            console.log(fruits);

            // 배열의 접근 [index]
            console.log(fruits[1]);

            // 배열 요소의 수정
            fruits[1] = 'mango';
            console.log(fruits);

            // for문 기본 예시
            for(let i=0; i<fruits.length; i++){
                console.log(fruits[i]);
            }

            // forEach문
            for(const f of fruits){
                console.log(f);
            }
            fruits.forEach(a=>console.log(a));
            fruits.forEach((a,b) => console.log("a : " + a + " b : " + b));

            // filter 메서드
            const num1 = [1,2,3,4,5,6];
            // 짝수인 요소만을 뽑아 새로운 배열 생성 후 출력
            const num2 = num1.filter(a => (a%2 == 0));
            console.log(num2);

            // map 메서드 : 짝수인 수의 제곱값을 담는 새로운 배열
            const num3 = num1.filter(a=>a%2==0).map(a=>a*a);
            console.log(num3);

            console.log(num1.find(a=>a%2==0));

            const num4 = [...num1, 7, 8, 9];
            console.log(num4);
        }
        function practice(){
            let people =[{name: "kim", age : 20}, {name: "seo", age : 30}, {name: "park", age : 22}];
            // 나이가 30세 이상인 사람을 담은 새로운 배열
            
            let newPeople1 = people.filter(a => a.age >= 30);
            console.log(newPeople1);

            // 기존 객체에 모두 email:test@naver.com의 한쌍의 값을 추가
            const newPeople2 = people.map(p=>{return {...p, email:"test@naver.com"}});

            const arr1 = {1:"name1", 2:"name2"};
            const arr2 = [{id:1, name:"name1", email:"name1@naver.com"}, {id:2, name:"name2", email:"name2@naver.com"}, {id:3, name:"name3", email:"name3@naver.com"}];
        
            // arr1에 있는 key값이 arr2에 id값으로 있다면, 해당 arr2의 요소로 이루어진 새로운 객체를 생성
            const arr3 = Object.keys(arr1).map(a=>{
                const p1 = arr2.find(b=>b.id==a);
                return p1
            });
            console.log(arr3);

        }
        function convertType(){
            let numStr = "10";
            let str = "hello";
            let num1 = Number(numStr);
            // typeof: 변수의 타입 리턴
            console.log(typeof num1);
            num1 = String(num1);
            console.log(typeof num1);
            // NaN 발생
            // let num2 = Number(str);
            // console.log(num2);
            // console.log(10-"문자열");

            // ==와 ===(타입까지 체크)의 차이
            console.log(10=='10'); // true
            console.log(10==='10'); // false

            // undefined, null 비교
            let output1;
            let output2 = null;
            console.log(typeof output1);
            console.log(typeof output2);
            console.log(output1 == output2);    // true
            console.log(output1 === output2);   // false
            
        }
    </script>
</head>
<body>
    <h2>js 객체</h2>
    <button onclick="showObject()">객체 조회</button>
    <button onclick="makeObject()">객체 생성</button>
    <button onclick="makeArr()">배열 생성 및 조회</button>
    <button onclick="practice()">filter, find, map </button>
    <button onclick="convertType()">형 변환 </button>
    <p id="result">반환 결과</p>
</body>
</html>